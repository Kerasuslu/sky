<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
	<title>Sky Sequencer</title>

	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
	<link rel="icon" type="image/png" sizes="174x174" href="./favicon.png">

	<script src="https://tonejs.github.io/build/Tone.js"></script>
	<style type="text/css">
		tone-transport {
			margin-bottom: 10px;
		}
	</style>
</head>
<body>
	<button onclick="Tone.start();Tone.Transport.start()">start</button>
	<button onclick="Tone.Transport.pause()">pause</button>
	<button onclick="Tone.Transport.stop()">stop</button><br>
	bpm:<input type="number" value="120" onchange="Tone.Transport.bpm.value=parseFloat(this.value)">
	<pre id="log"></pre>

	<style>

	</style>
	<div class="">

	</div>

	<script type="text/javascript">
		const mbxli = ()=>{var s={};for(var i=2;i<=6;i++){s["a"+i]="a"+i+".mp3";s["d#"+(i+1)]="ds"+(i+1)+".mp3";}return s;};

		const synth = new Tone.Sampler(mbxli(),()=>{
			//Tone.Transport.start();
		},"https://mcbeeringi.github.io/sky/audio/instr/musicbox/").toDestination();
		const seq = new Tone.Sequence((time, note) => {
			note=note.split(',');
			synth.triggerAttackRelease(note, "1m", time);
			log.textContent+="\n"+note+"\t"+time;//Tone.Time().toNotation();
			// subdivisions are given as subarrays
		}, ["C4", ["E4", "D4", "E4"], "G4,D4", ["A4,E4", "G4,D4"]]).start();
	</script>
</body>
</html>
