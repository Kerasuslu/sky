<!DOCTYPE html>
<html lang="en" dir="ltr">
<head prefix="og: http://ogp.me/ns#">
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-145066191-2"></script>
<script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments);}gtag('js', new Date());gtag('config', 'UA-145066191-2');</script>
  <meta charset="utf-8">
	<meta name="viewport" content="width=device-width,initial-scale=1.0">
	<title>sky_sequencer</title>
	<meta name="description" content="sky_sequencer">
	<link rel="shortcut icon" type="image/png" href="img/ico/seq.jpg">
	<meta property="og:type" content="website">
	<meta property="og:title" content="sky_sequencer">
	<meta property="og:description" content="Skyの楽譜が作れるページです">
	<meta property="og:url" content="https://mcbeeringi.github.io/sky/seq.html">
	<meta property="og:image" content="https://mcbeeringi.github.io/sky/img/ico/seq.jpg">
	<!--iOS-->
	<meta name="apple-mobile-web-app-capable" content="yes">
	<meta name="apple-mobile-web-app-status-bar-style" content="default">
	<meta name="apple-mobile-web-app-title" content="sky instr">
	<link rel="apple-touch-icon" href="img/sky.png">
	<!--sw-->
	<link rel="manifest" href="skymf.json">
	<meta name="theme-color" content="#fea"/>
	<script>
		//if('serviceWorker'in navigator)window.addEventListener('load',()=>{navigator.serviceWorker.register('skysw.js').then((reg)=>{console.log('[ServiceWorker] Registered',reg);});});
	</script>
</head>
<body>
	<script src="style.js" async></script>
	<script src="sample.js"></script>
	<script>var ifwebp=new Image();ifwebp.onerror=()=>document.body.classList.add('nowebp');ifwebp.src='img/seq.webp';</script>
	<style>
		:root{user-select:none;-webkit-user-select:none;}/*::-webkit-scrollbar{display:none;}*/
		html,body{height:100%;margin:0;position:relative;}.clear_fix::after{content:"";clear:both;display:block;}

		.dispPanel{position:relative;width:100vw;height:240px;overflow:hidden;border:6px solid #0000;border-left:none;border-right:none;touch-action:manipulation;background:#000a repeating-linear-gradient(#fffc,#fffc 16px,#fff8 16px,#fff8 48px,#fffa 48px,#fffa 64px,#fff8 64px,#fff8 80px,#fffa 80px,#fffa 96px,#fff8 96px,#fff8 112px);}
		.dispPanel>*,#dispScr>*{position:absolute;line-height:16px;font-size:12px;}
		#dispScr{width:100%;height:100%;overflow:scroll;position:relative;}#disp{padding:0 64px 0 16px;display:flex;}
		#dispCur{width:16px;height:100%;background:#bff;left:17px;transition:.1s;border-radius:4px;}
		.nWrapper{display:flex;position:relative;min-width:16px;height:240px;margin-left:1px;border-radius:4px;text-align:center;background-color:#0004;}
		.nWrapper *{color:#fff8;}.nWrapper p{width:14px;height:14px;margin:1px;background:#fea;position:absolute;left:0;border-radius:33%;box-shadow:0 0 4px #888;pointer-events:none;}
		.nWrapper .nWrapper{background:#0002;}.nWrapper .nWrapper:first-child{margin-left:8px;}.nWrapper .nWrapper:last-child{margin-right:8px;}

		.uiPanel{float:right;clear:right;max-width:312px;margin:2px 0;}
		.grid{display:inline-block;width:48px;height:48px;margin:2px;background:#4448;color:#0000;text-shadow:none;border:none;border-radius:25%;box-shadow:0 0 8px #4448;text-align:center;vertical-align:middle;outline:none;font-size:18px;font-family:"M PLUS Rounded 1c",sans-serif;padding:0;touch-action:manipulation;}
		.bg{background-image:url(img/seq.webp);background-size:800% auto;background-position:var(--bp);}.showtxt{color:#caf0f6;text-shadow:0 0 4px #688;}
		#name_{font-size:large;background:#4448;width:100%;max-width:148px;height:48px;border-radius:12px;border:none;font-family:"M PLUS Rounded 1c",sans-serif;color:#caf0f6;text-shadow:0 0 4px #688;outline:none;padding:0 2px;margin:2px;}

		.kbPanel{position:relative;width:100%;max-width:360px;float:left;clear:left;backdrop-filter:blur(2px);-webkit-backdrop-filter:blur(2px);touch-action:none;}.kbPanel:before{content:"";display:block;padding-top:60%;}
		#kb{position:absolute;top:0;left:0;right:0;bottom:0;perspective:1000px;background:#0004;border-radius:8px;overflow:hidden;}#kb input{position:absolute;display:none;}#kb>div{height:33.3%;margin:0;}
		#kb p{display:inline-block;width:20%;height:100%;margin:0;position:relative;}
		#kb p::before,#kb p::after{content:"";display:block;width:84%;height:84%;margin:8%;border-radius:20%;position:absolute;}
		#kb p::before{background:#4448;filter:drop-shadow(0 0 4px #444);transition:.02s;}#kb input:not(:checked)+p::before{transition:.2s;}
		#kb input:checked+p::before{background:#fea8;filter:drop-shadow(0 0 4px #fea);transform:scale(.8);}
		#kb p::after{background:url(img/seq.webp);background-size:800%;transition:.4s;}#kb input:not(:checked)+p::after{transition:.01s;}
		#kb p:nth-child(2n):not(.c)::after{background-position:-200% 0;}
		#kb p:nth-child(4n):not(.c)::after{background-position:-100% 0;}
		#kb input:checked+p::after{transform:rotateY(360deg)scale(.8);}

		body>input[type="checkbox"]{display:none;}
		#uiflip:checked~* .uiPanel{float:left;clear:left;}#uiflip:checked~* .kbPanel{float:right;clear:right;}
		label.grid{box-shadow:0 0 0 0 #fea inset;transition:.1s;}
		#kblock:checked~* label[for="kblock"],#pract:checked~* label[for="pract"],#rawedit:checked~* label[for="rawedit"]{box-shadow:0 0 2px 4px #fea inset;}
		#pract:checked~* .kbPanel{position:fixed;top:0;left:0;right:0;margin:0 auto;max-width:420px;}
		#rawedit:checked~* #dispScr{transform-origin:126px;transform:rotateZ(90deg);}

		.fg_{position:fixed;width:100%;height:100%;z-index:10;pointer-events:none;}
		#alcb{display:none;}#alcb+label,#albox{opacity:0;pointer-events:none;transition:.2s;}
		#alcb+label{display:block;width:100%;height:100%;background:#0008;backdrop-filter:blur(2px);-webkit-backdrop-filter:blur(2px);}
		#albox{width:calc(90% - 64px);max-width:256px;min-height:128px;max-height:calc(90% - 40px);border-radius:16px;padding:20px;white-space:pre-wrap;background:#4448;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);overflow-y:scroll;text-align:center;}
		#alcb:checked~*{opacity:1;pointer-events:auto;}
		#albox>div{display:inline-block;background:#8884;margin:4px;width:260px;text-align:left;}#albox>div:first-line{font-size:large;}

		.nowebp .bg,.nowebp #kb p::after{background-image:url(img/seq.png);}
	</style>
	<style id="sty"></style><style id="styperf"></style>
	<input type="checkbox" id="rawedit">
	<input type="checkbox" id="uiflip">
	<input type="checkbox" id="kblock">
	<input type="checkbox" id="pract" onchange="kblock.checked=this.checked;">
	<div class="fg_">
		<pre id="jswarn">Please enable JavaScript to use this app.</pre><script>jswarn.style.display='none';</script>
		<input type="checkbox" id="alcb"><label for="alcb"></label><pre id="albox" class="style"></pre>
	</div>


	<div class="dispPanel">
		<div id="dispScr"><div id="dispCur"></div><div id="disp">loading…</div></div>
		<div style="opacity:.5;pointer-events:none;width:8px;color:#000;text-shadow:0 0 4px #fff;top:0;">CBAGFEDCBAGFEDC</div>
	</div>
	<div class="clear_fix">
		<div class="uiPanel">
			         <label for="rawedit" class="grid bg" style="--bp:-400% -200%;">edit raw
			</label><button onclick="userscr[0]=true;dispScr.scrollLeft=dispCur.getBoundingClientRect().left+dispScr.scrollLeft+window.scrollX-dispScr.clientWidth*.5;" class="grid bg" style="--bp:-300% -100%;">scroll to cursor
			</button><button class="grid bg" style="--bp:-200% -100%;transform:scaleX(-1);" onclick="tstep(-1);">back
			</button><button onclick="ttoggle();" class="grid bg" style="--bp:0 -100%;">start/pause</button><button onclick="tstop();" class="grid bg" style="--bp:-100% -100%;">stop
			</button><button class="grid bg" style="--bp:-200% -100%;" onclick="tstep(1);">forward
			</button><button onclick="" class="grid bg" style="--bp:-00% -00%;">copy
			</button><button onclick="" class="grid bg" style="--bp:-00% -00%;">paste
			</button><button class="grid bg" style="--bp:-400% -100%;">delete
			</button><button class="grid bg" style="--bp:-500% -100%;">add
			</button><button class="grid bg" style="--bp:-600% -100%;">add in
			</button><button class="grid bg" style="--bp:-700% -100%;">add out</button><br>
		</div>
		<div class="kbPanel">
			<div id="kb">
				<div><input type="checkbox"id="kbb00"><p class="c"></p><input type="checkbox"id="kbb01"><p></p><input type="checkbox"id="kbb02"><p></p><input type="checkbox"id="kbb03"><p></p><input type="checkbox"id="kbb04"><p></p></div>
				<div><input type="checkbox"id="kbb10"><p></p><input type="checkbox"id="kbb11"><p></p><input type="checkbox"id="kbb12"><p class="c"></p><input type="checkbox"id="kbb13"><p></p><input type="checkbox"id="kbb14"><p></p></div>
				<div><input type="checkbox"id="kbb20"><p></p><input type="checkbox"id="kbb21"><p></p><input type="checkbox"id="kbb22"><p></p><input type="checkbox"id="kbb23"><p></p><input type="checkbox"id="kbb24"><p class="c"></p></div>
			</div>
		</div>
		<div class="uiPanel">
			         <button onclick="" class="grid bg" style="--bp:-300% -200%;transform:scaleX(-1);">undo
			</button><button onclick="" class="grid bg" style="--bp:-300% -200%;">redo
			</button><label for="kblock" class="grid bg" style="--bp:-100% -200%;">lock keyboard
			</label><label for="pract" class="grid bg" style="--bp:-200% -200%;">practice
			</label><button onclick="" class="grid bg" style="--bp:-600% -200%;">save
			</button><button onclick="Tone.Transport.pause();styperf.textContent='';load();" class="grid bg" style="--bp:-500% -200%;">load
			</button><button onclick="main.bpm-=6;Tone.Transport.bpm.value-=6;bpm_.value=main.bpm;" class="grid bg" style="--bp:-500% 0;">slow
			</button><label><input id="bpm_" class="grid bg showtxt" onchange="bpmset();" style="--bp:-700% 0;"></input></label><button onclick="main.bpm+=6;Tone.Transport.bpm.value+=6;bpm_.value=main.bpm;" class="grid bg" style="--bp:-400% 0;">fast
			</button><button onclick="sc_.value=--main.sc;" class="grid bg" style="--bp:-500% 0;">down
			</button><label><input id="sc_" class="grid bg showtxt" onchange="scset();" style="--bp:-600% 0;"></input></label><button onclick="sc_.value=++main.sc;" class="grid bg" style="--bp:-400% 0;">up
			</button><label><input id="name_" onchange="nameset();" placeholder="untitled"></input></label><label><input id="ts_" class="grid bg showtxt" onchange="tsset();" style="--bp:-100% -300%;"></input></label><label for="uiflip" class="grid bg" style="--bp:0 -200%;">flip ui
</label><button onclick="alert(info);" class="grid bg" style="--bp:-300% 0;">info</button>
		</div>
		<div class="uiPanel">
		</div>
	</div>

	<label>sample: <select id="slc" onchange="main=sample[this.value];set();">
		<option value="0">新宝島</option>
		<option value="1">LINE</option>
		<option value="2">\ｵﾌﾛｶﾞﾜｷﾏｼﾀ/</option>
		<option value="3">前前前世</option>
		<option value="4" selected>nyan-cat</option>
		<option value="5">LOSER</option>
	</select></label>
	<button onclick="caches.keys().then(x=>caches.open(x[0])).then(x=>x.delete('/sky/seq.html')).then(x=>log.textContent+=`\ncache del: ${x}`)">cache del</button><br>
	<!--
	<a href="https://twitter.com/share?ref_src=twsrc%5Etfw" class="twitter-share-button" data-text="sky_sequencer" data-size="large" data-url="https://mcbeeringi.github.io/sky/seq.html" data-hashtags="">Tweet</a><script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
	-->
	<pre id="log"></pre>


	<script src="https://tonejs.github.io/build/Tone.js"></script>
	<script src="https://mcbeeringi.github.io/src/requestIdleCallback.min.js"></script>
	<script>
		'use strict';
		alert=(x,mw)=>{albox.textContent=x;albox.style.pointerEvents=mw?'':'none';albox.style.maxWidth=mw?mw:'';alcb.checked=true;}
		//window.onbeforeunload=e=>{e.preventDefault();return'';};

		var sc=Number(sc_.value),main,rendered,curpos=0,userscr=[false,false];
		const seq = new Tone.Sequence((time,note)=>{
			note=note.split(',');
			//Tone.Draw.schedule(()=>{},time);
			curset();scrset();kbset(note);
			if(note[0]){
				synth.triggerAttackRelease(note.map(toHz),'1m',time,pract.checked?.3:1);
				llog(`${note.map(x=>n2c[(Number(x)+main.sc+12)%12]+(Math.floor((Number(x)+main.sc)*.08333)+4)/*49+Number(x)+main.sc*/)}`,1);
			}
			llog(Tone.Transport.position);
		},[],'4n').start(0),
		info='in development\n\nPowerd by Tone.js\nAudio: GarageBand\n\nauthor:@SkyEringi\nbuild:2101300\nMIT License',
		llog=(x,c)=>{if(c)log.textContent='';log.textContent+=`${c?'':'\n'}${x}`;},
		//url_o=(x)=>JSON.stringify(x).replace(/\"/g,"'").replace(/,/g,'.').replace(/\[/g,'(').replace(/\]/g,')'), url_i=(x)=>JSON.parse(x.replace(/'/g,'"').replace(/\./g,',').replace(/\(/g,'[').replace(/\)/g,']')),
		mbxli=()=>{var s={};for(var i=3;i<=6;i++){s[`a${i}`]=`a${i}.mp3`;s[`d#${i+1}`]=`ds${i+1}.mp3`;}return s;},
		synth=new Tone.Sampler(mbxli(),()=>{},"https://mcbeeringi.github.io/sky/audio/instr/musicbox/").connect(new Tone.Volume(-10).toDestination()),
		toHz=x=>880*Math.pow(2,(Number(x)+main.sc)/12),//C5~C7
		i2n=['-9','-7','-5','-4','-2','0','2','3','5','7','8','10','12','14','15'],
		n2i={'-9':'0','-8':'0.5','-7':'1','-6':'1.5','-5':'2','-4':'3','-3':'3.5','-2':'4','-1':'4.5','0':'5','1':'5.5','2':'6',
			'3':'7','4':'7.5','5':'8','6':'8.5','7':'9','8':'10','9':'10.5','10':'11','11':'11.5','12':'12','13':'12.5','14':'13','15':'14'},
		n2c=['A','A#','B','C','C#','D','D#','E','F','F#','G','G#'],
		pos2p=pos_=>{var tmp=pos_.split(':').map(x=>Number(x));return tmp[0]*Tone.Transport.timeSignature+tmp[1]+tmp[2]*.25;},
		p2pos=p_=>`${Math.floor(p_/Tone.Transport.timeSignature)}:${Math.floor(p_)%Tone.Transport.timeSignature}:${(p_*4)%4}`,
		scset=()=>{if(Number.isInteger(Number(sc_.value)))main.sc=Number(sc_.value);else sc_.value=main.sc;llog(main.sc);},
		bpmset=()=>{var tmp=Number(bpm_.value);if(tmp){main.bpm=tmp;Tone.Transport.bpm.value=tmp;}else bpm_.value=main.bpm;llog(main.bpm);},
		tsset=()=>{var tmp=Number(ts_.value);if(tmp){main.ts=tmp;Tone.Transport.timeSignature=tmp||4;}else ts_.value=main.ts;
			sty.textContent=main.ts>1?`#disp>.nWrapper:nth-child(${main.ts}n+1){overflow:hidden;}#disp>.nWrapper:nth-child(${main.ts}n+1)::before{content:"";display:block;width:2px;height:100%;background:#feac;}`:'';
			llog(main.ts);
		},
		nameset=()=>{if(name_.value)main.name=name_.value;else name_.value=main.name;llog(main.name);},
		curset=p=>{
			if(typeof p=='number'&&isFinite(p)){curpos=rendered.p.indexOf(p);}
			else{p=pos2p(Tone.Transport.position)%main.scores.length;curpos=rendered.p.indexOf(Math.floor(p));while(p>=rendered.p[curpos])curpos++;curpos--;}
			dispCur.style.left=rendered.e[curpos].getBoundingClientRect().left+dispScr.scrollLeft+window.scrollX+'px';
		},
		kbset=(x=rendered.ind[curpos].split('-').reduce((a,x)=>a[x],main.scores).split(','))=>{
			var tmp=x.map(y=>n2i[y]);
			document.querySelectorAll('#kb input').forEach((e,i)=>e.checked=tmp.includes(String(i)));
			return x;
		},
		scrset=()=>{
			var dcbl=dispCur.getBoundingClientRect().left+window.scrollX;
			if(16<dcbl&&dcbl<dispScr.clientWidth-64)userscr[1]=false;
			if(!userscr[1]){
				if(dcbl>=dispScr.clientWidth-64){userscr[0]=true;dispScr.scrollLeft+=dcbl-16;}
				else if(dcbl<=16){userscr[0]=true;dispScr.scrollLeft+=dcbl+64-dispScr.clientWidth;}
				if(curpos==0){userscr[0]=true;dispScr.scrollLeft=0;}
				else if(curpos==rendered.length-1){userscr[0]=true;dispScr.scrollLeft=dispScr.scrollWidth-dispScr.clientWidth;}
			}
		};

		main=sample[slc.value];
		log.textContent=info;

		document.querySelectorAll('#kb p').forEach((e,i)=>{
			const keyfx=ev=>{
				Tone.start();
				ev.preventDefault();
				if(kblock.checked)synth.triggerAttackRelease(toHz(i2n[i]));
				else{
					var arr=rendered.ind[curpos].split('-').reduce((a,c)=>a[c],main.scores).split(',');
					if(e.previousElementSibling.checked==false){
						synth.triggerAttackRelease(toHz(i2n[i]));
						var note=document.createElement('p');
						note.style.bottom=i*16+'px';
						rendered.e[curpos].appendChild(note);
						arr=[...arr,i2n[i]].filter(x=>x);
					}else{
						rendered.e[curpos].querySelectorAll('p').forEach(e=>{
							if(e.style.bottom==i*16+'px')rendered.e[curpos].removeChild(e);
						});
						arr=arr.filter(x=>x!=i2n[i]);
					}
					arr=`main.scores[${rendered.ind[curpos].replace(/-/g,'][')}]='${arr.join(',')}';`
					llog(arr);
					Function(arr)();
					seq.events=main.scores;
					e.previousElementSibling.checked=!e.previousElementSibling.checked;
				}
			};
			e.addEventListener('touchstart',keyfx,{passive:false});
			e.addEventListener('mousedown',keyfx,{passive:false});
		});
		document.addEventListener('keydown',e=>{
			llog(e.code);
			if(document.activeElement.tagName!='INPUT'){
				switch (e.code){
					case'Space':e.preventDefault();ttoggle();break;
					case'ArrowUp':e.preventDefault();if(e.shiftKey)bpm_.nextElementSibling.click();else sc_.value=++main.sc;break;
					case'ArrowDown':e.preventDefault();if(e.shiftKey)bpm_.previousElementSibling.click();else sc_.value=--main.sc;break;
					case'ArrowLeft':e.preventDefault();if(e.shiftKey){Tone.Transport.bpm.value--;bpm_.value=--main.bpm;}else tstep(-1);break;
					case'ArrowRight':e.preventDefault();if(e.shiftKey){Tone.Transport.bpm.value++;bpm_.value=++main.bpm;}else tstep(1);break;
					default:
						const keymap={
							KeyR:'kbb00',KeyT:'kbb01',KeyY:'kbb02',KeyU:'kbb03',KeyI:'kbb04',
							KeyF:'kbb10',KeyG:'kbb11',KeyH:'kbb12',KeyJ:'kbb13',KeyK:'kbb14',
							KeyC:'kbb20',KeyV:'kbb21',KeyB:'kbb22',KeyN:'kbb23',KeyM:'kbb24'
						}
						if(keymap[e.code]){
							//e.preventDefault();
							window[keymap[e.code]].nextElementSibling.dispatchEvent(new Event('mousedown'));
						}
				}
			}
		});

		/////from gui
		const ttoggle=()=>{
			Tone.start();
			styperf.textContent=Tone.Transport.state=='started'?'':'#dispCur,#kb p::before,#kb p::after{transition: none !important;}';
			Tone.Transport[Tone.Transport.state=='started'?'pause':'start']();
		},
		tstop=()=>{Tone.Transport.stop();styperf.textContent='';curset();scrset();kbset();},
		tstep=x=>{
			Tone.start();
			Tone.Transport.pause();styperf.textContent='';
			curpos+=x;
			if(curpos<0)curpos+=rendered.length;else if(curpos>=rendered.length)curpos-=rendered.length;
			dispCur.style.left=rendered.e[curpos].getBoundingClientRect().left+dispScr.scrollLeft+window.scrollX+'px';
			Tone.Transport.position=p2pos(rendered.p[curpos]);
			scrset();
			var note=kbset();if(note[0])synth.triggerAttackRelease(note.map(toHz));
		};
		disp.onclick=e=>{
			if(e.target.classList.contains('t')){
				Tone.start();
				e.target.style.background='#fea8';
				llog(e.target.dataset.p);
				setTimeout(()=>e.target.style.background='',100);
				Tone.Transport.position=p2pos(e.target.dataset.p);
				curset(Number(e.target.dataset.p));
				var note=kbset();if(note[0])synth.triggerAttackRelease(note.map(toHz));
			}
		};
		dispScr.addEventListener('scroll',e=>{if(userscr[0])userscr[0]=false;else userscr[1]=true;});


		/////render
		const render=()=>{
			console.time();
			const rcore=(scores,e,b,l=1)=>{
				if(b)e.textContent=' ';
				scores.map((x,i)=>{
					var div = document.createElement('div');
					div.classList.add('nWrapper');
					e.appendChild(div);//e.insertBefore(div,e.lastChild);
					div.dataset.ind=(div.parentNode.dataset.ind?div.parentNode.dataset.ind+'-':'')+i;
					div.dataset.p=(b?i:Number(div.parentNode.dataset.p)+l*i);
					if(x){
						switch(typeof x){
							case'string':
								x.split(',').map(y=>{
									var note=document.createElement('p');
									note.style.bottom=((n2i[y]+1?Number(n2i[y]):15)*16)+'px';
									div.appendChild(note);
								});
								div.classList.add('t');
								break;
							case'object':rcore(x,div,0,l/x.length);break;
						}
					}else div.classList.add('t');
				})
			}
			rcore(main.scores,disp,1);
			console.timeEnd();
			rendered={ind:[],p:[]};
			rendered.e=document.querySelectorAll('#disp .t');
			rendered.e.forEach(e=>{
				rendered.ind.push(e.dataset.ind);
				rendered.p.push(Number(e.dataset.p));
			});
			rendered.length=rendered.e.length;
			console.log('render',rendered);
		};

		const set=()=>{
			seq.events=main.scores;sc_.value=main.sc;
			bpm_.value=main.bpm;bpmset();ts_.value=main.ts;tsset();name_.value=main.name;nameset();
			//Tone.Transport.swing=1;
			requestIdleCallback(render);
			requestIdleCallback(tstop);
		};
		set();
		const save=()=>{

		},
		load=()=>{
			alert('loading…','none');
			albox.textContent='';
			albox.insertAdjacentHTML('beforeend',`<div>New sheet<br><br><button onclick="alcb.checked=false;"class="grid bg" style="--bp:0 -100%;">open</button></div>`);
			new Array(20).fill({name:'example ',lastm:'xx/xx/xx'}).forEach((x,i)=>{
				albox.insertAdjacentHTML('beforeend',`<div>${x.name+i}<br>${x.lastm}<br><button
					onclick="alcb.checked=false;"class="grid bg" style="--bp:0 -100%;">open</button><button
					onclick="alert('dupe');"class="grid bg" style="--bp:0 -300%;">dupe</button><button
					onclick="if(this.style.left=='0px'){this.style.left='52px';this.textContent='really?';this.classList.add('showtxt');setTimeout(()=>{this.style.left='0px';this.textContent='delete';this.classList.remove('showtxt');},1000);}
					else{alert('del');}"
					class="grid bg" style="--bp:-700% -200%;position:relative;left:0px;transition:left .2s;">delete</button></div>`);
			});
		}
	</script>
</body>
</html>
