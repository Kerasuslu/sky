<!DOCTYPE html>
<html lang="en" dir="ltr">
	<head prefix="og: http://ogp.me/ns#">
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-145066191-2"></script>
<script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments);}gtag('js', new Date());gtag('config', 'UA-145066191-2');</script>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width,initial-scale=1">
		<title>sky_info</title>
		<meta name="Description" content="Sky treasure candle">
		<link rel="shortcut icon" type="image/jpeg" href="img/ico/info.jpg">
		<meta property="og:type" content="website">
		<meta property="og:title" content="sky_info">
		<meta property="og:description" content="Skyの大キャン予報です">
		<meta property="og:url" content="https://mcbeeringi.github.io/sky/info.html">
		<meta property="og:image" content="https://mcbeeringi.github.io/sky/img/ico/info.jpg">
		<!--iOS-->
		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="apple-mobile-web-app-status-bar-style" content="default">
		<meta name="apple-mobile-web-app-title" content="sky instr">
		<link rel="apple-touch-icon" href="img/sky.png">
		<!--sw-->
		<link rel="manifest" href="skymf.json">
		<meta name="theme-color" content="#fea"/>
		<script>
			if('serviceWorker'in navigator&&location.protocol.includes('http')&&location.hostname!='localhost')window.addEventListener('load',()=>{navigator.serviceWorker.register('skysw.js').then((reg)=>{console.log('skysw Registered',reg);});});
		</script>
	</head>
	<body>
		<script src="style.js" async></script>
		<style>
			:root{tab-size:4em;font-size:16px;}img{width:100%;height:auto;}
			pre{white-space:pre-wrap;font-family:'M PLUS Rounded 1c',sans-serif;}
			br+img{max-width:512px;background:#8888;}
			input[type=checkbox]{display:none;}input[type=checkbox]+div{background:#8888;}input[type=checkbox]:not(:checked)+div{display:none;}label{display:block;margin:8px 0;}input[type=checkbox]+div>div{display:inline-block;}.clear_fix::after{content:"";clear:both;display:block;}
			.ib>*{display:inline-block;max-width:512px;min-width:256px;width:100%;vertical-align:top;}
			.of>p{display:inline-block;width:48px;height:48px;background:#8888;text-align:center;line-height:48px;}
		</style>

		<pre id="time">Please enable JavaScript to use this app.</pre>
		<hr>
		<div class="ib">
			<div>
				<h2>today</h2>
				<pre id="_0t"></pre>
				<div id="_0o" class="of"><p>無念</p><p>社畜</p><p>ピザ</p><p>つぼ</p><p>ネコ</p><p>宇宙</p><p>散歩</p></div>
				<img id="_0i" width="4" height="3" alt="today"><img id="_0i_" width="4" height="3" style="display:none;">
			</div>
			<div>
				<h2>tomorrow</h2>
				<pre id="_1t"></pre>
				<div id="_1o" class="of"><p>無念</p><p>社畜</p><p>ピザ</p><p>つぼ</p><p>ネコ</p><p>宇宙</p><p>散歩</p></div>
				<img id="_1i" width="4" height="3" alt="tomorrow"><img id="_1i_" width="4" height="3" style="display:none;">
			</div>
		</div>
		<hr>
		<div style="user-select:none;-webkit-user-select:none;">
			<label><input type="checkbox">草原(3)▶︎<div><div>["入口左手前","丸石奥","鳥の塔右奥","洞窟入口"]<br><img src="img/candle/00.webp" width="4" height="3"></div><div>["入口右奥","丸石右","4島中央","神殿内"]<br><img src="img/candle/01.webp" width="4" height="3"></div><div>["入口左奥","鳥の塔中央","洞窟内","神殿前"]<br><img src="img/candle/02.webp" width="4" height="3"></div></div></label>
			<label><input type="checkbox">雨林(3)▶︎<div><div>["入口右手前","開拓地船","川&蟹木","晴れ間池"]<br><img src="img/candle/10.webp" width="4" height="3"></div><div>["入口左奥","開拓地奥木","墓所中央","神殿後"]<br><img src="img/candle/11.webp" width="4" height="3"></div><div>["入口右奥","川&amp;蟹出口","墓所橋","晴れ間奥"]<br><img src="img/candle/12.webp" width="4" height="3"></div></div></label>
			<label><input type="checkbox">峡谷(2)▶︎<div><div>["入口左","スケート橋","天球儀入口","ゴール左"]<br><img src="img/candle/20.webp" width="4" height="3"></div><div>["入口右奥","スケート氷","天球儀出口","ゴール右"]<br><img src="img/candle/21.webp" width="4" height="3"></div></div></label>
			<label><input type="checkbox">捨て地(3)▶︎<div><div>["入口後ろ","祠出口","投石台手前","戦場砦右奥"]<br><img src="img/candle/30.webp" width="4" height="3"></div><div>["入口左奥","祠闇花","投石台中央","難破船後端"]<br><img src="img/candle/31.webp" width="4" height="3"></div><div>["入口右奥","投石台出口","難破船先端","戦場砦上"]<br><img src="img/candle/32.webp" width="4" height="3"></div></div></label>
			<label><input type="checkbox">書庫(2)▶︎<div><div>["1F手前","1F奥","2F奥","6F手前"]<br><img src="img/candle/40.webp" width="4" height="3"></div><div>["1F右","2F扉左","4F祠","6F奥"]<br><img src="img/candle/41.webp" width="4" height="3"></div></div></label>
		</div>
		大キャンドル参考元: <a href="https://twitter.com/sky_tea11">ティー</a>様 <br><!--/status/1356572540437635073-->
		オフィス参考元: <a href="https://sky-children-of-the-light.fandom.com/wiki/Secret_Area#The_Spirits_of_the_Office">Sky Wiki</a> <br>
		<br>
		[sky_info] build:2106170 <br>
		<a href="https://twitter.com/mcbeeringi">@McbeEringi</a> MITLicense

		<script>
			'use strict';
			let imgf=new Image();imgf.onerror=()=>{imgf='JPG';jpgfall();};imgf.onload=()=>imgf=null;imgf.src='img/candle/00.webp';
			const jpgfall=()=>{if(typeof imgf=='string')document.querySelectorAll('img[src$="webp"]').forEach(e=>{if(e.src)e.src=e.src.replace('webp',imgf);});};

			const c_dic =[
				//https://twitter.com/sky_tea11/status/1234038235149426689/photo/1
				//https://twitter.com/i/events/1176090791342567424
				['~草原~',['入口左手前','丸石奥','鳥の塔右奥','洞窟入口'],['入口右奥','丸石右','4島中央','神殿内'],['入口左奥','鳥の塔中央','洞窟内','神殿前']],
				['~雨林~',['入口右手前','開拓地船','川&蟹木','晴れ間池'],['入口左奥','開拓地奥木','墓所中央','神殿後'],['入口右奥','川&蟹出口','墓所橋','晴れ間奥']],
				['~峡谷~',['入口左','スケート橋','天球儀入口','ゴール左'],['入口右奥','スケート氷','天球儀出口','ゴール右']],
				['~捨て地~',['入口後ろ','祠出口','投石台手前','戦場砦右奥'],['入口左奥','祠闇花','投石台中央','難破船後端'],['入口右奥','投石台出口','難破船先端','戦場砦上']],
				['~書庫~',['1F手前','1F奥','2F奥','6F手前'],['1F右','2F扉左','4F祠','6F奥']],
			],
			calendar={
				2020:{
					12:{
						21:[2,0,1],
						22:[3,1,2],
						23:[4,0,1],
						24:[0,1,2],
						25:[1,1,2],
						26:[2,0,1],
						27:[3,0,2],
						28:[4,0,1],
						29:[0,0,2],
						30:[1,0,2],
						31:[2,0,1]
					}
				},
				2021:{
					1:{
						1 :[3,0,1],2 :[4,0,1],3 :[0,0,1],
						6 :[3,1],  7 :[4,1],  8 :[0,1],
						11:[3,2],  12:[4,0],  13:[0,2],
						16:[3,0],  17:[4,1],  18:[0,0],
						21:[3,1],  22:[4,0],  23:[0,1],
						26:[3,2],  27:[4,1],  28:[0,2],
						31:[3,0]
					}
				}
			},
			limited=(x,i)=>{
				let cal;
				try{cal=calendar[x.getFullYear()][x.getMonth()+1][x.getDate()];}catch(e){return 1;}
				window[`_${i}t`].textContent=`${cal[2]+1?'DOUBLE TREASURE CANDLES ~Jan 3rd\n\n':''}${c_dic[cal[0]][0]}\n${c_dic[cal[0]][cal[1]+1]}\n${c_dic[cal[0]][cal[2]+1]||''}`;
				window[`_${i}i`].src=`img/candle/${cal[0]}${cal[1]}.webp`;
				if(cal[2]!=undefined){window[`_${i}i_`].style.display='inline';window[`_${i}i_`].src=`img/candle/${cal[0]}${cal[2]}.webp`;}
			}

			let hbuf;
			const c_fx=t=>{let s=[Math.floor((t.getTime()-new Date('2020/11/4 00:00').getTime())/86400000)%5];s[1]=Math.floor((t.getDate()-1)/5)%[3,3,2,3,2][s[0]];return s;},
			core=(t,i)=>{
				if(limited(t,i)){
					let x = c_fx(t);
					window[`_${i}t`].textContent=`${c_dic[x[0]][0]}\n${c_dic[x[0]][x[1]+1]}`;
					window[`_${i}i`].src=`img/candle/${x.join('')}.webp`;
				}
				window[`_${i}o`].childNodes.forEach(e=>e.style.background='#2228');
				window[`_${i}o`].childNodes[(t.getDate()-1)%7].style.background='#6ca8';
			},
			main=()=>{
				let local=new Date(),server=new Date(local.getTime()-3600000*17),dst=server.getMonth()*40+server.getDate();//summertime(3/14~11/7) ? 16 : 17
				if(dst=>94&&dst<=407){server=new Date(local.getTime()-3600000*16);dst='(Daylight Saving Time)';}else summer='';
				time.textContent=`current time: ${local.toLocaleString()}\n  server time: ${server.toLocaleString()} ${dst}`;
				if(hbuf!=server.getHours()){
					hbuf=server.getHours();
					console.log('exe');
					core(server,0);
					server.setDate(server.getDate()+1);
					core(server,1);
				}
				jpgfall();
			};main();
			setTimeout(()=>setInterval(main,1000),1000-new Date().getMilliseconds());
		</script>
	</body>
</html>
